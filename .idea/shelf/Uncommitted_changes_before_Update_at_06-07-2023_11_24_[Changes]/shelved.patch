Index: supplier/orders/orders_history.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?php include(\"./../../sup_config.php\");\r\ninclude(\"./../../config.php\");\r\nif (!isset($_SESSION['user'])) {\r\n\theader('location: ./../logout.php');\r\n}\r\n$temp = \"\";\r\n$timestamp = date('H:i:s');\r\n$message = date(\"Y-m-d H:i:s\");\r\n$chicagotime = date(\"Y-m-d H:i:s\");\r\n$role = $_SESSION['role_id'];\r\n$user_id = $_SESSION[\"id\"];\r\nif (count($_POST) > 0) {\r\n\t$message_stauts_class = '';\r\n\t$import_status_message = '';\r\n\r\n\t\t$order_status_id = $_POST['edit_order_status'];\r\n\t\t$e_order_status = $_POST['e_order_status'];\r\n\t\t$order_id = $_POST['edit_order_id'];\r\n\t\tif (!is_null($order_status_id) && !empty($order_status_id)) {\r\n\t\t\t$sql = \"update sup_order set order_status_id='$order_status_id', modified_on='$chicagotime', modified_by='$user_id' where  order_id = '$order_id'\";\r\n\t\t\t$result1 = mysqli_query($sup_db, $sql);\r\n\t\t\tif ($result1) {\r\n\r\n\t\t\t\t$message_stauts_class = 'alert-success';\r\n\t\t\t\t$import_status_message = 'Order status Updated successfully.';\r\n\t\t\t} else {\r\n\t\t\t\t$message_stauts_class = 'alert-danger';\r\n\t\t\t\t$import_status_message = 'Error: Please Insert valid data';\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t$order_status_id = $_POST['edit_order_status_id'];\r\n\t\t\t$order_up_status_id = $_POST['edit_up_order_status_id'];\r\n\t\t\t$e_order_status = $_POST['e_order_status'];\r\n\t\t\t$order_id = $_POST['edit_id'];\r\n\t\t\t$is_updated = true;\r\n\t\t\tif (null != $order_id) {\r\n\t\t\t\t$ship_det = $_POST['edit_ship_details'];\r\n\t\t\t\tif (null != $ship_det) {\r\n\t\t\t\t\t$sql = \"update sup_order set order_status_id='$order_up_status_id',shipment_details = '$ship_det' ,  modified_on='$chicagotime', modified_by='$user_id' where  order_id = '$order_id'\";\r\n\t\t\t\t\t$result1 = mysqli_query($sup_db, $sql);\r\n\t\t\t\t\tif (!$result1) {\r\n\t\t\t\t\t\t$is_updated = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!$is_updated) {\r\n\t\t\t\t\t$message_stauts_class = 'alert-danger';\r\n\t\t\t\t\t$import_status_message = 'Error: Error updating  order. Try after sometime.';\r\n\t\t\t\t}\r\n\t\t\t\t//invoice\r\n\t\t\t\tif (isset($_FILES['invoice'])) {\r\n\t\t\t\t\t$errors = array();\r\n\t\t\t\t\t$file_name = $_FILES['invoice']['name'];\r\n\t\t\t\t\t$file_size = $_FILES['invoice']['size'];\r\n\t\t\t\t\t$file_tmp = $_FILES['invoice']['tmp_name'];\r\n\t\t\t\t\t$file_type = $_FILES['invoice']['type'];\r\n\t\t\t\t\t$file_ext = strtolower(end(explode('.', $file_name)));\r\n\t\t\t\t\t$extensions = array(\"jpeg\", \"jpg\", \"png\", \"pdf\");\r\n\t\t\t\t\tif (in_array($file_ext, $extensions) === false) {\r\n\t\t\t\t\t\t$errors[] = \"extension not allowed, please choose a JPEG/PNG/PDF file.\";\r\n\t\t\t\t\t\t$message_stauts_class = 'alert-danger';\r\n\t\t\t\t\t\t$import_status_message = 'Error: Extension not allowed, please choose a JPEG/PNG/PDF file.';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ($file_size > 2097152) {\r\n\t\t\t\t\t\t$errors[] = 'Max allowed file size is 2 MB';\r\n\t\t\t\t\t\t$message_stauts_class = 'alert-danger';\r\n\t\t\t\t\t\t$import_status_message = 'Error: File size must not exceed 2 MB';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (empty($errors) == true) {\r\n                        $file_name = $order_id . '__' . $file_name;\r\n\t\t\t\t\t\tmove_uploaded_file($file_tmp, \"./order_invoices/\" . $file_name);\r\n\t\t\t\t\t\t$sql = \"INSERT INTO `order_files`(`order_id`, `file_type`, `file_name`, `created_at`) VALUES ('$order_id' ,'invoice','$file_name','$chicagotime' )\";\r\n\t\t\t\t\t\t$result1 = mysqli_query($sup_db, $sql);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\t//attachments\r\n\t\t\t\tif (isset($_FILES['attachments'])) {\r\n\t\t\t\t\tforeach ($_FILES['attachments']['name'] as $key => $val) {\r\n\r\n\t\t\t\t\t\t$errors = array();\r\n\t\t\t\t\t\t$file_name = $_FILES['attachments']['name'][$key];\r\n\t\t\t\t\t\t$file_size = $_FILES['attachments']['size'][$key];\r\n\t\t\t\t\t\t$file_tmp = $_FILES['attachments']['tmp_name'][$key];\r\n\t\t\t\t\t\t$file_type = $_FILES['attachments']['type'][$key];\r\n\t\t\t\t\t\t$file_ext = strtolower(end(explode('.', $file_name)));\r\n\t\t\t\t\t\t$extensions = array(\"jpeg\", \"jpg\", \"png\", \"pdf\");\r\n\t\t\t\t\t\tif (in_array($file_ext, $extensions) === false) {\r\n\t\t\t\t\t\t\t$errors[] = \"extension not allowed, please choose a JPEG/PNG/PDF file.\";\r\n\t\t\t\t\t\t\t$message_stauts_class = 'alert-danger';\r\n\t\t\t\t\t\t\t$import_status_message = 'Error: Extension not allowed, please choose a JPEG/PNG/PDF file.';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ($file_size > 2097152) {\r\n\t\t\t\t\t\t\t$errors[] = 'Max allowed file size is 2 MB';\r\n\t\t\t\t\t\t\t$message_stauts_class = 'alert-danger';\r\n\t\t\t\t\t\t\t$import_status_message = 'Error: File size must not exceed 2 MB';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (empty($errors) == true) {\r\n                            $file_name = $order_id . '__' . $file_name;\r\n\t\t\t\t\t\t\tmove_uploaded_file($file_tmp, \"./order_invoices/\" . $file_name);\r\n\t\t\t\t\t\t\t$sql = \"INSERT INTO `order_files`(`order_id`, `file_type`, `file_name`, `created_at`) VALUES ('$order_id' ,'attachment','$file_name','$chicagotime' )\";\r\n\t\t\t\t\t\t\t$result1 = mysqli_query($sup_db, $sql);\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t$message_stauts_class = 'alert-success';\r\n\t\t\t$import_status_message = 'Order status Updated successfully.';\r\n\t\t}\r\n}\r\n?>\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n\t<meta charset=\"utf-8\">\r\n\t<meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\r\n\t<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\r\n\t<title><?php echo $sitename; ?> | Historical Orders</title>\r\n\t<!-- Global stylesheets -->\r\n\t<link href=\"https://fonts.googleapis.com/css?family=Roboto:400,300,100,500,700,900\" rel=\"stylesheet\"\r\n\t\t  type=\"text/css\">\r\n\t<link href=\"<?php echo $siteURL . \"/assets/css/icons/icomoon/styles.css\" ?>\" rel=\"stylesheet\" type=\"text/css\">\r\n\t<link href=\"<?php echo $siteURL . \"/assets/css/bootstrap.css\" ?>\" rel=\"stylesheet\" type=\"text/css\">\r\n\t<link href=\"<?php echo $siteURL . \"/assets/css/core.css\" ?>\" rel=\"stylesheet\" type=\"text/css\">\r\n\t<link href=\"<?php echo $siteURL . \"/assets/css/components.css\" ?>\" rel=\"stylesheet\" type=\"text/css\">\r\n\t<link href=\"<?php echo $siteURL . \"/assets/css/colors.css\" ?>\" rel=\"stylesheet\" type=\"text/css\">\r\n\t<link href=\"<?php echo $siteURL . \"/assets/css/style_main.css\" ?>\" rel=\"stylesheet\" type=\"text/css\">\r\n\t<!-- /global stylesheets -->\r\n\t<!-- Core JS files -->\r\n\t<script type=\"text/javascript\" src=\"<?php echo $siteURL . \"/assets/js/plugins/loaders/pace.min.js\" ?>\"></script>\r\n\t<script type=\"text/javascript\" src=\"<?php echo $siteURL . \"/assets/js/core/libraries/jquery.min.js\" ?>\"></script>\r\n\t<script type=\"text/javascript\" src=\"<?php echo $siteURL . \"/assets/js/core/libraries/bootstrap.min.js\" ?>\"></script>\r\n\t<script type=\"text/javascript\" src=\"<?php echo $siteURL . \"/assets/js/plugins/loaders/blockui.min.js\" ?>\"></script>\r\n\t<!-- /core JS files -->\r\n\t<!-- Theme JS files -->\r\n\t<script type=\"text/javascript\"\r\n\t\t\tsrc=\"<?php echo $siteURL . \"/assets/js/plugins/tables/datatables/datatables.min.js\" ?>\"></script>\r\n\t<script type=\"text/javascript\"\r\n\t\t\tsrc=\"<?php echo $siteURL . \"/assets/js/plugins/forms/selects/select2.min.js\" ?>\"></script>\r\n\t<script type=\"text/javascript\" src=\"<?php echo $siteURL . \"/assets/js/core/app.js\" ?>\"></script>\r\n\t<script type=\"text/javascript\" src=\"<?php echo $siteURL . \"/assets/js/pages/datatables_basic.js\" ?>\"></script>\r\n\t<script type=\"text/javascript\" src=\"<?php echo $siteURL . \"/assets/js/plugins/ui/ripple.min.js\" ?>\"></script>\r\n\t<script type=\"text/javascript\"\r\n\t\t\tsrc=\"<?php echo $siteURL . \"/assets/js/plugins/notifications/sweet_alert.min.js\" ?>\"></script>\r\n\t<script type=\"text/javascript\" src=\"<?php echo $siteURL . \"/assets/js/pages/components_modals.js\" ?>\"></script>\r\n\t<!--chart -->\r\n\t<style>\r\n        html, body {\r\n            max-width: 100%;\r\n            overflow-x: hidden;\r\n            overflow: hidden;\r\n        }\r\n        .content {\r\n            padding: 0px 15px !important;\r\n            background-color: #060818;\r\n        }\r\n        .table>thead>tr>th {\r\n            vertical-align: middle;\r\n        }\r\n\t\t#order_details{\r\n\t\t\tmargin-top: 20px;\r\n\t\t}\r\n        #product_details{\r\n            margin-top: 20px;\r\n        }\r\n\r\n\t\t@media screen and (min-width: 2560px) {\r\n\t\t\t.dashboard_line_heading {\r\n\t\t\t\tfont-size: 22px !important;\r\n\t\t\t\tpadding-top: 5px;\r\n\t\t\t}\r\n\t\t}\r\n\t\t.thumb img:not(.media-preview) {\r\n\t\t\theight: 150px !important;\r\n\t\t}\r\n\t</style>\r\n    <script>\r\n        $(document).ready(function(){\r\n            $(\"#flip\").click(function(){\r\n                $(\"#panel\").slideToggle(\"slow\");\r\n            });\r\n        });\r\n    </script>\r\n    <script>\r\n        function assortiment(e){\r\n            var assortimentid = e.id + \"__js\";\r\n            if ($(\"#\" + assortimentid).display = \"block\"){\r\n                $(\".assortiment\").stop().slideUp();\r\n                $(\"#\" + assortimentid).stop().slideToggle();\r\n            } else if ($(\"#\" + assortimentid).display = \"none\"){\r\n                $(\"#\" + assortimentid).stop().slideToggle();\r\n            }\r\n        }\r\n    </script>\r\n    <style>\r\n        #panel, #section1__js {\r\n            padding: 5px;\r\n            text-align: center;\r\n            background-color: #e5eecc;\r\n            border: solid 1px #c3c3c3;\r\n        }\r\n\r\n        #panel {\r\n            padding: 50px;\r\n        }\r\n        * {margin: 0; box-sizing: border-box} /* addition; more \"fluent\" */\r\n\r\n        .assortiment {\r\n            display: none;\r\n        }\r\n\r\n        .btn {\r\n            border: 1px solid black;\r\n            border-radius: 10px;\r\n            padding: 10px;\r\n            width: 100px;\r\n            margin: 5px;\r\n            background-color: lightblue;\r\n        }\r\n\r\n        .btn:hover {\r\n            cursor: pointer\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n<!-- Main navbar -->\r\n<!-- /main navbar -->\r\n<?php\r\n$cam_page_header = \"Historical Orders\";\r\ninclude(\"./../sup_header.php\");\r\ninclude(\"./../sup_admin_menu.php\");\r\n?>\r\n<!-- Page container -->\r\n<div class=\"page-container\">\r\n\t<!-- Page content -->\r\n\t<div class=\"page-content\">\r\n\t\t<!-- Main content -->\r\n\t\t<div class=\"content-wrapper\">\r\n                <?php\r\n                if (!empty($import_status_message)) {\r\n                    echo '<div class=\"alert-dismissible fade show alert ' . $message_stauts_class . '\">' . $import_status_message . '</div>';\r\n                }\r\n                ?>\r\n                <?php\r\n                if (!empty($_SESSION['import_status_message'])) {\r\n                    echo '<div class=\"alert ' . $_SESSION['message_stauts_class'] . '\">' . $_SESSION['import_status_message'] . '</div>';\r\n                    $_SESSION['message_stauts_class'] = '';\r\n                    $_SESSION['import_status_message'] = '';\r\n                }\r\n                ?>\r\n\t\t\t<!-- Content area -->\r\n\t\t\t<div class=\"content\" id=\"order_det_table\">\r\n\t\t\t\t<div class=\"panel panel-flat\">\r\n\t\t\t\t\t<table id=\"order_details\" class=\"table\">\r\n\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th>S.No</th>\r\n\t\t\t\t\t\t\t<!--<th>Order ID</th>-->\r\n\t\t\t\t\t\t\t<th>Order Desc</th>\r\n\t\t\t\t\t\t\t<th>Ordered On</th>\r\n\t\t\t\t\t\t\t<th>Order Status</th>\r\n\t\t\t\t\t\t\t<th>Actions</th>\r\n                            <th>Details</th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t<?php\r\n\t\t\t\t\t\t$query = sprintf(\"SELECT * FROM  sup_order  where order_active = 0 order by created_on DESC\");\r\n\t\t\t\t\t\t$qur = mysqli_query($sup_db, $query);\r\n\t\t\t\t\t\twhile ($rowc     = mysqli_fetch_array($qur)) {\r\n\t\t\t\t\t\t\t?>\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<td><?php echo ++$counter; ?></td>\r\n\t\t\t\t\t\t\t\t<?php $order_id = $rowc['order_id'];\r\n\t\t\t\t\t\t\t\t$order_status_id = $rowc['order_status_id'];\r\n\t\t\t\t\t\t\t\t$ship_det = $rowc['shipment_details']; ?>\r\n\t\t\t\t\t\t\t\t<td><?php echo $rowc['order_desc']; ?></td>\r\n\t\t\t\t\t\t\t\t<?php\r\n\r\n\t\t\t\t\t\t\t\t$qurtemp = mysqli_query($sup_db, \"SELECT * FROM  sup_order_status where sup_order_status_id  = '$order_status_id'\");\r\n\t\t\t\t\t\t\t\twhile ($rowctemp = mysqli_fetch_array($qurtemp)) {\r\n\t\t\t\t\t\t\t\t\t$order_status = $rowctemp[\"sup_order_status\"];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t?>\r\n                                <td><?php echo dateReadFormat($rowc['created_on']); ?></td>\r\n                                <td>\r\n                                    <?php\r\n                                    $query34 = sprintf(\"SELECT sup_order_status FROM  sup_order_status where sup_order_status_id = '$order_status_id'\");\r\n                                    $qur34 = mysqli_query($sup_db, $query34);\r\n                                    $rowc34 = mysqli_fetch_array($qur34);\r\n                                    echo $rowc34[\"sup_order_status\"]; ?>\r\n                                </td>\r\n\t\t\t\t\t\t\t\t<td>\r\n                                    <a href=\"view_historical_data.php?id=<?php echo $order_id; ?>\" class=\"btn btn-info btn-xs\" style=\"background-color:#1e73be;\" target=\"_blank\"><i class=\"fa fa-eye\"></i></a>\r\n\t\t\t\t\t\t\t\t</td>\r\n                                <td>\r\n                                    <button type=\"button\" class=\"btn btn-info btn-xs\" style=\"background-color:#1e73be;\">\r\n                                        <div id=\"section1\" onclick=\"assortiment(this)\">\r\n                                            <i class=\"fa fa-file\"></i>\r\n                                        </div>\r\n                                    </button>\r\n\r\n                                   <!-- <button type=\"button\" class=\"btn btn-info btn-xs\" style=\"background-color:#1e73be;\"><i class=\"fa fa-file\"></i></button>-->\r\n                                    <!--<div id=\"flip\"><i class=\"fa fa-file\"></i></div>\r\n                                    <div id=\"panel\"></div>-->\r\n                                </td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<?php } ?>\r\n\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t</table>\r\n                    <div class=\"assortiment\" id=\"section1__js\">\r\n                    <div id=\"panel\">\r\n                                        <table id=\"product_details\" class=\"table\">\r\n                                            <thead>\r\n                                            <tr>\r\n                                                <th>S.No</th>\r\n                                                <th>Order Status</th>\r\n                                                <th>User</th>\r\n                                                <th>Date</th>\r\n                                            </tr>\r\n                                            </thead>\r\n                                            <tbody>\r\n                                            <tr>\r\n                                                <?php\r\n                                                $query12 = sprintf(\"SELECT * FROM  supplier_session_log  where order_id = '$order_id'\");\r\n                                                $qur12 = mysqli_query($sup_db, $query12);\r\n                                                while ($rowc12     = mysqli_fetch_array($qur12)) {\r\n                                                    $order_status_id = $rowc12['order_status_id'];\r\n                                                    $created_by = $rowc12['created_by'];\r\n                                                    $created_on = $rowc12['created_on'];\r\n                                                    $qurtemp12 = mysqli_query($sup_db, \"SELECT * FROM  sup_order_status where sup_order_status_id  = '$order_status_id'\");\r\n                                                    while ($rowctemp12 = mysqli_fetch_array($qurtemp12)) {\r\n                                                        $order_status = $rowctemp12[\"sup_order_status\"];\r\n                                                    }\r\n                                                    $qurtemp22 = mysqli_query($sup_db, \"SELECT * FROM  cam_users where is_deleted != 1 and users_id = '$created_by'\");\r\n                                                    while ($rowctemp22 = mysqli_fetch_array($qurtemp22)) {\r\n                                                        $firstname = $rowctemp22[\"firstname\"];\r\n                                                        $lastname = $rowctemp22[\"lastname\"];\r\n                                                        $full_name = $firstname . '' . $lastname;\r\n                                                    }\r\n                                                    ?>\r\n                                                    <td><?php echo ++$cnt; ?></td>\r\n                                                    <td><?php echo $order_status; ?></td>\r\n                                                    <td><?php echo $full_name; ?></td>\r\n                                                    <td><?php echo dateReadFormat($created_on); ?></td>\r\n                                            </tr>\r\n                                            <?php } ?>\r\n                                            </tbody>\r\n                                        </table>\r\n                    </div>\r\n                </div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<!-- edit modal -->\r\n\t\t\t<div id=\"edit_modal_theme_primary\" class=\"modal fade\" tabindex=\"-1\">\r\n\t\t\t\t<div class=\"modal-dialog\">\r\n\t\t\t\t\t<div class=\"modal-content\">\r\n\t\t\t\t\t\t<div class=\"modal-header bg-primary\">\r\n\t\t\t\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>\r\n\t\t\t\t\t\t\t<h6 class=\"modal-title\">\r\n\t\t\t\t\t\t\t\tUpdate Shipment Data\r\n\t\t\t\t\t\t\t</h6>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<form action=\"\" id=\"shipment_details_form\" enctype=\"multipart/form-data\" class=\"form-horizontal\"\r\n\t\t\t\t\t\t\t  method=\"post\">\r\n\t\t\t\t\t\t\t<div class=\"modal-body\">\r\n\t\t\t\t\t\t\t\t<!--SHIPPING DETAILS-->\r\n\t\t\t\t\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"col-md-12\">\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t\t\t<label class=\"col-lg-4 control-label\">Shipment Details * : </label>\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-lg-8\">\r\n                                            <textarea required id=\"edit_ship_details\" name=\"edit_ship_details\" rows=\"3\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t  placeholder=\"Enter Shipment Details...\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t  class=\"form-control\"></textarea>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<!--Invoice-->\r\n\t\t\t\t\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"col-md-12\">\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t\t\t<label class=\"col-lg-4 control-label\">Attach Invoice : </label>\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-lg-8\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"file\" name=\"invoice\" id=\"invoice\" class=\"form-control\" disabled>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!-- `display Invoice-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<?php $qurimage = mysqli_query($sup_db, \"SELECT * FROM  order_files where file_type='invoice' and order_id = '$order_id'\");\r\n\t\t\t\t\t\t\t\t\t\t\t\twhile ($rowcimage = mysqli_fetch_array($qurimage)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t$filename = $rowcimage['file_name'];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t?>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-lg-12\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a target=\"_blank\" href='./order_invoices/<?php echo $filename; ?>'><?php echo $filename; ?></a>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<?php } ?>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div id=\" error6\" class=\"red\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<!--ATTACHMENTS-->\r\n\t\t\t\t\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"col-md-12\">\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t\t\t<label class=\"col-lg-4 control-label\">Other Attachments\r\n\t\t\t\t\t\t\t\t\t\t\t\t: </label>\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-lg-8\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"file\" name=\"attachments[]\" id=\"attachments\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t   class=\"form-control\" multiple disabled>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<!-- `display Invoice-->\r\n\t\t\t\t\t\t\t\t\t\t\t\t<?php $qurimage = mysqli_query($sup_db, \"SELECT * FROM  order_files where file_type='attachment' and order_id = '$order_id'\");\r\n\t\t\t\t\t\t\t\t\t\t\t\twhile ($rowcimage = mysqli_fetch_array($qurimage)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t$filename = $rowcimage['file_name'];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t?>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-lg-12\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a target=\"_blank\" href='./order_invoices/<?php echo $filename; ?>'><?php echo $filename; ?></a>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<?php } ?>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div id=\"error6\" class=\"red\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<!-- /main content -->\r\n\t</div>\r\n\t<!-- /page content -->\r\n</div>\r\n\r\n<!-- new footer here -->\r\n<?php\r\n$i = $_SESSION[\"sqq1\"];\r\nif ($i == \"\") {\r\n\t?>\r\n\r\n<?php }\r\n?>\r\n<script>\r\n    jQuery(document).ready(function ($) {\r\n        $(document).on('click', '#edit', function () {\r\n            var element = $(this);\r\n            var edit_id = $(this).data(\"id\");\r\n            var order_status_id = $(this).data(\"order_status_id\");\r\n            var ship_det = $(this).data(\"ship_det\");\r\n            var up_order_status_id = $(\"#edit_order_status\").val();\r\n            $(\"#edit_order_status_id\").val(order_status_id);\r\n            $(\"#edit_up_order_status_id\").val(up_order_status_id);\r\n            $(\"#edit_ship_details\").val(ship_det);\r\n            $(\"#edit_id\").val(edit_id);\r\n        });\r\n\r\n    });\r\n</script>\r\n<script>\r\n    $(document).on('click', '#file_del', function () {\r\n        var order_id = $(this)[0].children.order_id.value;\r\n        var file_name = $(this)[0].children.file_name.value;\r\n        var file_type = $(this)[0].children.file_type.value;\r\n        var data = \"op_type=del_file&order_id=\" + order_id +\"&file_name=\"+file_name+\"&file_type=\"+file_type;\r\n        $.ajax({\r\n            type: 'POST',\r\n            data: data,\r\n            async:false,\r\n            success: function(data) {\r\n                $('#edit_modal_theme_primary').modal({\"backdrop\": \"static\"},'show');\r\n            }\r\n        }).done(function( data ) {\r\n            $('#edit_modal_theme_primary').modal({\"backdrop\": \"static\"},'show');\r\n        });\r\n    });\r\n\r\n    setTimeout(function () {\r\n\r\n        // Closing the alert\r\n        $('.alert-success').delay(100).fadeOut(500);\r\n    }, 2000);\r\n\r\n    $(document).ready(function() {\r\n        $('#order_details_wrapper').DataTable( {\r\n            \"paging\":   false,\r\n            \"ordering\": false,\r\n            \"info\":     false\r\n        } );\r\n    } );\r\n    // var alreadyDisplayed = localStorage.getItem('modalOpen');\r\n    $(document).ready(function() {\r\n        $('#product_details_wrapper').DataTable( {\r\n            \"paging\":   false,\r\n            \"ordering\": false,\r\n            \"info\":     false\r\n        } );\r\n    } );\r\n\r\n</script>\r\n<?php include(\"footer.php\"); ?> <!-- /page container -->\r\n</body>\r\n</html>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/supplier/orders/orders_history.php b/supplier/orders/orders_history.php
--- a/supplier/orders/orders_history.php	(revision 6f8778fd657701442b81fed535f19263e91c13cf)
+++ b/supplier/orders/orders_history.php	(date 1688622681733)
@@ -297,8 +297,8 @@
                                 <td>
                                     <button type="button" class="btn btn-info btn-xs" style="background-color:#1e73be;">
                                         <div id="section1" onclick="assortiment(this)">
-                                            <i class="fa fa-file"></i>
-                                        </div>
+                                            <input type="hidden" name="ord_id" id="ord_id" value="<?php echo $order_id; ?>">
+                                           <i class="fa fa-file"></i>
                                     </button>
 
                                    <!-- <button type="button" class="btn btn-info btn-xs" style="background-color:#1e73be;"><i class="fa fa-file"></i></button>-->
@@ -318,11 +318,12 @@
                                                 <th>Order Status</th>
                                                 <th>User</th>
                                                 <th>Date</th>
-                                            </tr>
+                                            </tr>x
                                             </thead>
                                             <tbody>
                                             <tr>
                                                 <?php
+                                                $ord_id = $_GET['orde']
                                                 $query12 = sprintf("SELECT * FROM  supplier_session_log  where order_id = '$order_id'");
                                                 $qur12 = mysqli_query($sup_db, $query12);
                                                 while ($rowc12     = mysqli_fetch_array($qur12)) {
Index: config/sup_db_config.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?php\r\n@ob_start();\r\nsession_start();\r\nini_set('display_errors', FALSE);\r\n\r\n$servername = \"localhost\";\r\n$username = \"ashams001\";\r\n$password = \"iqHired@123\";\r\n$dbname = \"sg_supplier\";\r\n\r\n// to check whether pin is updated or not\r\n\r\n$sup_db = mysqli_connect('localhost', 'ashams001', 'iqHired@123', 'sg_supplier');\r\n//$mysqli = new mysqli('localhost', 'ashams001', 'iqHired@123', 'sg_supplier');\r\n$sup_mysqli = new mysqli('localhost', 'ashams001', 'iqHired@123', 'sg_supplier');\r\n\r\ndate_default_timezone_set(\"America/chicago\");\r\n\r\n$sitename = \"SaarGummi\";\r\n\r\n$scriptName = \"http://crewassignmentmgmt:8888/\";\r\n\r\n?>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/config/sup_db_config.php b/config/sup_db_config.php
--- a/config/sup_db_config.php	(revision 6f8778fd657701442b81fed535f19263e91c13cf)
+++ b/config/sup_db_config.php	(date 1688615273549)
@@ -4,20 +4,20 @@
 ini_set('display_errors', FALSE);
 
 $servername = "localhost";
-$username = "ashams001";
-$password = "iqHired@123";
-$dbname = "sg_supplier";
+$username = "root";
+$password = "";
+$dbname = "server";
 
 // to check whether pin is updated or not
 
-$sup_db = mysqli_connect('localhost', 'ashams001', 'iqHired@123', 'sg_supplier');
+$sup_db = mysqli_connect('localhost', 'root', '', 'server');
 //$mysqli = new mysqli('localhost', 'ashams001', 'iqHired@123', 'sg_supplier');
-$sup_mysqli = new mysqli('localhost', 'ashams001', 'iqHired@123', 'sg_supplier');
+$sup_mysqli = new mysqli('localhost', 'root', '', 'server');
 
 date_default_timezone_set("America/chicago");
 
-$sitename = "SaarGummi";
+$sitename = "pn_2023";
 
-$scriptName = "http://crewassignmentmgmt:8888/";
+$scriptName = "https://localhost/pn_2023/";
 
 ?>
\ No newline at end of file
Index: .idea/vcs.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/vcs.xml b/.idea/vcs.xml
new file mode 100644
--- /dev/null	(date 1688615273705)
+++ b/.idea/vcs.xml	(date 1688615273705)
@@ -0,0 +1,6 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<project version="4">
+  <component name="VcsDirectoryMappings">
+    <mapping directory="$PROJECT_DIR$" vcs="Git" />
+  </component>
+</project>
\ No newline at end of file
Index: .idea/php.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/php.xml b/.idea/php.xml
new file mode 100644
--- /dev/null	(date 1688615273681)
+++ b/.idea/php.xml	(date 1688615273681)
@@ -0,0 +1,17 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<project version="4">
+  <component name="PhpIncludePathManager">
+    <include_path>
+      <path value="$PROJECT_DIR$/vendor/composer" />
+      <path value="$PROJECT_DIR$/vendor/phpmailer/phpmailer" />
+      <path value="$PROJECT_DIR$/vendor/phpseclib/phpseclib" />
+      <path value="$PROJECT_DIR$/vendor/paragonie/random_compat" />
+      <path value="$PROJECT_DIR$/vendor/paragonie/constant_time_encoding" />
+      <path value="$PROJECT_DIR$/vendor/paragonie/sodium_compat" />
+      <path value="$PROJECT_DIR$/vendor/firebase/php-jwt" />
+    </include_path>
+  </component>
+  <component name="PhpProjectSharedConfiguration" php_language_level="8.1">
+    <option name="suggestChangeDefaultLanguageLevel" value="false" />
+  </component>
+</project>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_05-07-2023_15_13__Changes_.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_05-07-2023_15_13__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_05-07-2023_15_13__Changes_.xml
new file mode 100644
--- /dev/null	(date 1688622510831)
+++ b/.idea/shelf/Uncommitted_changes_before_Update_at_05-07-2023_15_13__Changes_.xml	(date 1688622510831)
@@ -0,0 +1,4 @@
+<changelist name="Uncommitted_changes_before_Update_at_05-07-2023_15_13_[Changes]" date="1688550194391" recycled="true" deleted="true">
+  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_05-07-2023_15_13_[Changes]/shelved.patch" />
+  <option name="DESCRIPTION" value="Uncommitted changes before Update at 05-07-2023 15:13 [Changes]" />
+</changelist>
\ No newline at end of file
Index: config/config.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?php\r\n@ob_start();\r\nsession_start();\r\nini_set('display_errors', true);\r\n\r\n$servername = \"localhost\";\r\n$username = \"root\";\r\n$password = \"\";\r\n$dbname = \"saargummi\";\r\n\r\n// to check whether pin is updated or not \r\n$actual_link = \"$_SERVER[REQUEST_URI]\";\r\nif ($actual_link != \"/saargummi/profile.php\") {\r\n\t$pin = $_SESSION[\"pin\"];\r\n\t$pin_flag = $_SESSION[\"pin_flag\"];\r\n\r\n\tif ($pin_flag == \"1\") {\r\n\t\tif ($pin == \"0\") {\r\n\t\t\t$_SESSION['message_stauts_class'] = 'alert-danger';\r\n\t\t\t$_SESSION['import_status_message'] = 'Please Fill Pin';\r\n\t\t\theader(\"Location:profile.php\");\r\n\t\t}\r\n\t}\r\n}\r\n\r\n$db1 = mysqli_connect('localhost', 'root', '', 'saargummi');\r\n$mysqli = new mysqli('localhost', 'root', '', 'saargummi');\r\n\r\n$sitename = \"SaarGummi\";\r\n\r\n//error class\r\n$_SESSION['alert_success_class'] = 'alert-success';\r\n$_SESSION['alert_danger_class'] = 'alert-danger';\r\n\r\n//index error\r\n$_SESSION['error_1'] = \"Error: Incorrect User-id or Password ...!\";\r\n\r\n//forgot password error\r\n$_SESSION['error_2'] = \"Success: Password is sent...!\";\r\n$_SESSION['error_3'] = \"Error: Incorrect Mail-id...!\";\r\n\r\n//security question error\r\n$_SESSION['error_4'] = \"Error: Incorrect Security answers ...!\";\r\n$_SESSION['error_5'] = \"Error: Incorrect Mail-id ...!\";\r\n$scriptName = \"http://localhost/saargummi/\";\r\n\r\ndate_default_timezone_set(\"America/chicago\");\r\n?>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/config/config.php b/config/config.php
--- a/config/config.php	(revision 6f8778fd657701442b81fed535f19263e91c13cf)
+++ b/config/config.php	(date 1688615273254)
@@ -6,7 +6,7 @@
 $servername = "localhost";
 $username = "root";
 $password = "";
-$dbname = "saargummi";
+$dbname = "server";
 
 // to check whether pin is updated or not 
 $actual_link = "$_SERVER[REQUEST_URI]";
@@ -23,8 +23,8 @@
 	}
 }
 
-$db1 = mysqli_connect('localhost', 'root', '', 'saargummi');
-$mysqli = new mysqli('localhost', 'root', '', 'saargummi');
+$db1 = mysqli_connect('localhost', 'root', '', 'server');
+$mysqli = new mysqli('localhost', 'root', '', 'server');
 
 $sitename = "SaarGummi";
 
Index: config.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?php\r\ndefine('SITE_ROOT', __DIR__);\r\n\r\ninclude(\"/Users/ashams001/Sites/SG_Projects/pn_config.php\");\r\n//include(\"config/database_config.php\");\r\n//include(\"config/general_coding_config.php\");\r\ninclude(\"config/error_config.php\");\r\n$url = \"../api/\";\r\nrequire_once \"helper/PNUtilHelper.php\";\r\nrequire_once \"helper/PN_Constants.php\";\r\n?>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/config.php b/config.php
--- a/config.php	(revision 6f8778fd657701442b81fed535f19263e91c13cf)
+++ b/config.php	(date 1688615273537)
@@ -1,7 +1,7 @@
 <?php
 define('SITE_ROOT', __DIR__);
 
-include("/Users/ashams001/Sites/SG_Projects/pn_config.php");
+include("C:/xampp/htdocs/pn_config.php");
 //include("config/database_config.php");
 //include("config/general_coding_config.php");
 include("config/error_config.php");
Index: .idea/modules.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/modules.xml b/.idea/modules.xml
new file mode 100644
--- /dev/null	(date 1688615273565)
+++ b/.idea/modules.xml	(date 1688615273565)
@@ -0,0 +1,8 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<project version="4">
+  <component name="ProjectModuleManager">
+    <modules>
+      <module fileurl="file://$PROJECT_DIR$/.idea/pn_2023.iml" filepath="$PROJECT_DIR$/.idea/pn_2023.iml" />
+    </modules>
+  </component>
+</project>
\ No newline at end of file
Index: helper/PN_Constants.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?php\r\ndefine(\"EMAIL_USER\", \"admin@plantnavigator.com\");\r\ndefine(\"EMAIL_PASSWORD\", \"jphnpcmrqvtrjwef\");\r\ndefine(\"mdY_FORMAT\", 'm-d-Y');\r\ndefine(\"mdYHis_FORMAT\", 'm-d-Y H:i:s');\r\ndefine(\"site_URL\", 'http://localhost/pn_2023/');\r\ndefine(\"auto_logout_duration\", '10800');
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/helper/PN_Constants.php b/helper/PN_Constants.php
--- a/helper/PN_Constants.php	(revision 6f8778fd657701442b81fed535f19263e91c13cf)
+++ b/helper/PN_Constants.php	(date 1688615273603)
@@ -2,6 +2,10 @@
 define("EMAIL_USER", "admin@plantnavigator.com");
 define("EMAIL_PASSWORD", "jphnpcmrqvtrjwef");
 define("mdY_FORMAT", 'm-d-Y');
+define("mdYHi_FORMAT", 'm-d-Y H:i');
 define("mdYHis_FORMAT", 'm-d-Y H:i:s');
 define("site_URL", 'http://localhost/pn_2023/');
-define("auto_logout_duration", '10800');
\ No newline at end of file
+define("auto_logout_duration", '10800');
+define("auto_gbp_logout_duration", '21600');
+define("s_count", '7');
+define('defect_block', ['A1','A2','A3','B1','B2','B3','C1','C2','C3']);
\ No newline at end of file
Index: .idea/pn_2023.iml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/pn_2023.iml b/.idea/pn_2023.iml
new file mode 100644
--- /dev/null	(date 1688615273720)
+++ b/.idea/pn_2023.iml	(date 1688615273720)
@@ -0,0 +1,18 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<module type="WEB_MODULE" version="4">
+  <component name="NewModuleRootManager">
+    <content url="file://$MODULE_DIR$">
+      <sourceFolder url="file://$MODULE_DIR$/spec" isTestSource="true" />
+      <sourceFolder url="file://$MODULE_DIR$/tests" isTestSource="true" />
+      <excludeFolder url="file://$MODULE_DIR$/vendor/composer" />
+      <excludeFolder url="file://$MODULE_DIR$/vendor/phpmailer/phpmailer" />
+      <excludeFolder url="file://$MODULE_DIR$/vendor/phpseclib/phpseclib" />
+      <excludeFolder url="file://$MODULE_DIR$/vendor/paragonie/random_compat" />
+      <excludeFolder url="file://$MODULE_DIR$/vendor/paragonie/constant_time_encoding" />
+      <excludeFolder url="file://$MODULE_DIR$/vendor/paragonie/sodium_compat" />
+      <excludeFolder url="file://$MODULE_DIR$/vendor/firebase/php-jwt" />
+    </content>
+    <orderEntry type="inheritedJdk" />
+    <orderEntry type="sourceFolder" forTests="false" />
+  </component>
+</module>
\ No newline at end of file
